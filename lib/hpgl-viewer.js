!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=void 0;t.default=HPGLViewer=function(e){e.container||console.error("Please define a container in options"),e.layerColors||(e.layerColors=["black","red","blue","green","yellow","pink","orange","turquoise"]),e.machineRatio||(e.machineRatio=40);var t,r,a=document.getElementById(e.container),i=a.getContext("2d"),o=function(){a.width=e.canvasWidth,a.height=e.canvasWidth/(e.machineTravelWidth/e.machineTravelHeight),t=a.width,r=a.height};o();var l=function(e){console.log("[HPGL Viewer]",e)},c=function(e){l("Could not parse line:"+e)},u=function(e){if(isNaN(e))return!1;var t=parseFloat(e);return(0|t)===t},f=function(n,a){return[n=n/e.machineRatio/(e.machineTravelWidth/t),a=r-a/e.machineRatio/(e.machineTravelHeight/r)]};n.draw=function(t){var r=(t=t.replace(/(\r\n|\n|\r)/gm,"")).split(";"),a=e.layerColors[0],o=[0,0],u=!1,h=n;n.clear(),i.lineWidth=.5,i.strokeStyle=a,r.forEach(function(t){var r,n,l,s,v,p;if(t.length)if((t=t.toUpperCase()).match(/^PU/)){u=!1;var d=t.replace("PU","").split(",");if(d.length<2)return;o=h.move(d)}else if(t.match(/^PD/)){u=!0;var m=t.replace("PD","").split(",");if(m.length<2)return;o=h.trace(m)}else if(t.match(/^PA/)){var g=t.replace("PA","").split(",");if(g.length<2)return;o=u?h.trace(g):h.move(g)}else if(t.match(/^AA/)){var y=t.replace("AA","").split(",");if(y.length<3)return void c(t);var P=f(y[0],y[1]),b=y[2]*(Math.PI/180),T=(r=o[0],n=P[0],l=o[1],s=P[1],v=r-n,p=l-s,Math.hypot(v,p)),S=Math.atan2(o[1]-P[1],o[0]-P[0]);i.beginPath(),i.arc(P[0],P[1],T,S-b,S,!0),i.stroke(),o=P}else if(t.match(/^SP/)){var M=parseInt(t.replace("SP",""))-1;a=M>0?e.layerColors[M]:null,i.strokeStyle=a}else t.match(/^IN/)||t.match(/^VS/)||c(t)}),l("Finished parsing")},n.setMachineTravelWidth=function(t){u(t)&&(e.machineTravelWidth=t,o())},n.setMachineTravelHeight=function(t){u(t)&&(e.machineTravelHeight=t,o())},n.clear=function(){i.clearRect(0,0,t,r)},n.move=function(e){i.beginPath();var t=f(e[0],e[1]);return i.moveTo(t[0],t[1]),t},n.trace=function(e){for(var t;e.length;){var r=e.splice(0,2),n=f(r[0],r[1]);i.lineTo(n[0],n[1]),t=n}return i.stroke(),t}}}]);